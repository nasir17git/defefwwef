name: Slack Notification

on:
  workflow_dispatch:

jobs:
  notify:
    name: Post to Slack
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v2

      - name: Post to Slack channel
        id: slack
        uses: slackapi/slack-github-action@v1.23.0
        env:
          SLACK_BOT_TOKEN: ${{ secrets.SLACK_BOT_TOKEN }}
        # env:
        #   SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK_URL_DEPLOY }}
        with:
          channel-id: 'C05J50BRRB3'  # Replace with your Slack channel ID or name
          payload: |
            {
            	"blocks": [
            		{
            			"type": "section",
            			"text": {
            				"type": "mrkdwn",
            				"text": "<https://google.com|block 빌더 버전"
            			}
            		}
            	],
            	"attachments": [
            		{
            			"color": "#a63636",
            			"blocks": [
            				{
            					"type": "section",
            					"text": {
            						"type": "mrkdwn",
            						"text": "'미리보기에서는' <https://google.com|되지않지만> 테스트"
            					}
            				}
            			]
            		}
            	]
            }
